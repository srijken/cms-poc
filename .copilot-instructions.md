# Copilot Instructions for CMS POC

This is a headless CMS proof-of-concept built with Next.js and TinaCMS. When contributing to this repository, please follow these guidelines:

## Project Overview

- **Framework**: Next.js with TypeScript
- **CMS**: TinaCMS (local-only, Git-based)
- **Deployment**: Static export to GitHub Pages
- **Content**: Markdown files with frontmatter
- **Security**: Strict Content Security Policy (CSP)
- **Performance**: Minimal JavaScript footprint

## Development Guidelines

### Code Style and Standards

- Use TypeScript for all new code
- Follow existing naming conventions and file structure
- Maintain strict CSP compliance - no inline scripts in production
- Keep JavaScript bundle minimal and optimized
- Use functional React components with hooks

### Content Management

- Content files are stored in `content/` directory as Markdown with frontmatter
- Pages: `content/pages/*.md`
- Posts: `content/posts/*.md`
- Media files: `public/uploads/`
- TinaCMS configuration: `tina/` directory

### Project Structure

```
cms-poc/
├── .github/workflows/    # CI/CD workflows
├── components/           # Reusable React components
├── content/             # Markdown content files
├── lib/                 # Utility functions and helpers
├── pages/              # Next.js pages (routing)
├── public/             # Static assets and uploads
├── styles/             # CSS and styling
├── tina/               # TinaCMS schema and configuration
└── out/                # Generated static site (build output)
```

### Key Commands

- `npm run dev`: Start development server
- `npm run tinacms`: Start development with TinaCMS editor
- `npm run build`: Build for production (static export)
- `npm run tinacms:build`: Build TinaCMS configuration

### Testing and Quality

- Test changes locally before committing
- Install dependencies first: `npm install`
- Verify static build works: `npm run build`
- Check TinaCMS functionality: `npm run tinacms`
- Ensure CSP compliance (no console errors in production)
- Validate content can be edited through TinaCMS admin interface
- Note: TinaCMS may show React version warnings but should still function correctly

### Security Considerations

- Maintain strict Content Security Policy
- No inline scripts or styles in production
- Validate all user inputs in TinaCMS schemas
- Keep dependencies updated and secure
- Content is Git-tracked for version control and security

### Performance Requirements

- Maintain minimal JavaScript bundle size
- Use Next.js static generation for optimal performance
- Optimize images and media files
- Ensure fast loading times for static pages
- Test build output in `out/` directory

### Common Tasks

1. **Adding a new page**: Create Markdown file in `content/pages/`
2. **Adding a new post**: Create Markdown file in `content/posts/`
3. **Updating TinaCMS schema**: Modify files in `tina/` directory
4. **Adding components**: Create in `components/` directory
5. **Styling changes**: Update files in `styles/` directory

### Deployment

- Automatic deployment to GitHub Pages via GitHub Actions
- Static files generated in `out/` directory
- Custom domain configuration in `out/CNAME`
- No server-side dependencies in production

When making changes, always consider the static-first, minimal JavaScript approach and ensure TinaCMS editor functionality remains intact.